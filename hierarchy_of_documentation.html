<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Harry Bachrach" />
  <title>A Hierarchy of Documentation</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
  <link rel="stylesheet" href="pandoc.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<nav id="TOC" class="toc">
  <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox">
  <div class="toc-list-wrapper">
    <ul>
    <li><a href="#code-identifiers">Code (Identifiers)</a><ul>
    <li><a href="#accessibility">Accessibility</a></li>
    <li><a href="#responsibilities">Responsibilities</a></li>
    <li><a href="#identifiers-and-code-simplification">Identifiers and Code Simplification</a></li>
    <li><a href="#caveat-enigmatic-language-syntax">Caveat: Enigmatic language syntax</a></li>
    </ul></li>
    <li><a href="#in-code-comments">In-code comments</a><ul>
    <li><a href="#accessibility-1">Accessibility</a></li>
    <li><a href="#responsibilities-1">Responsibilities</a></li>
    <li><a href="#common-pitfall-poor-comment-location">Common Pitfall: Poor Comment Location</a></li>
    </ul></li>
    <li><a href="#commit-messages">Commit Messages</a><ul>
    <li><a href="#accessibility-2">Accessibility</a></li>
    <li><a href="#responsibilities-2">Responsibilities</a></li>
    <li><a href="#tip-using-references-to-other-commits">Tip: using references to other commits</a></li>
    </ul></li>
    <li><a href="#pullmerge-requests-issue-trackers">Pull/merge requests &amp; issue trackers</a><ul>
    <li><a href="#accessibility-3">Accessibility</a></li>
    <li><a href="#responsibilities-3">Responsibilities</a></li>
    </ul></li>
    <li><a href="#conclusion">Conclusion</a></li>
    </ul>
  </div>
  <label class="mobile-menu-toggle" for="mobile-menu-checkbox">TOC</label>
</nav>
<header>
<h1 class="title">A Hierarchy of Documentation</h1>
<p class="author">Harry Bachrach</p>
<p class="date">Apr 24 2020</p>
</header>
<p>“Where should this information live?” is a common question I encounter daily as a software engineer. I (alone or in consultation with others) will make a decision and that information needs to persist…somewhere. The goal of course is to prevent some future engineer (often myself) from encountering some code and asking “why?” or, even worse, “what?”.</p>
<p>I’ve found there’s a sort of hierarchy to the accessibility of various information that I found useful in sharing.</p>
<p>In order of most accessible to least, the hierarchy is as follows:</p>
<ol type="1">
<li>Code (identifiers)</li>
<li>In-code comments</li>
<li>Commit messages</li>
<li>Pull/merge requests &amp; issue trackers</li>
</ol>
<p>This list may be different for other people and may change in time as tools get better, but for now, this has held true for me.</p>
<p>I’m sure that similar things have also been said before. Shoulders of giants and all that—would love to read any previous writings on similar topics!</p>
<p>So! Let’s get into some of the reasoning…</p>
<h2 id="code-identifiers">Code (Identifiers)</h2>
<h3 id="accessibility">Accessibility</h3>
<p>By far, the most important place to put information is in the code itself. Why?</p>
<ul>
<li>It can be easily searched with tools like <code>grep</code>, <code>ag</code>, <code>ripgrep</code>, or your favorite file searcher</li>
<li>It (generally) follows a predictable structure and connections between components can be traced (e.g. through the call stack)</li>
<li>It is <em>very</em> unlikely to be discarded accidentally</li>
</ul>
<h3 id="responsibilities">Responsibilities</h3>
<p>Because of their inherent visibility, identifiers<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> should always be the first place to put information, especially</p>
<ul>
<li>What values represent</li>
<li>What functions do &amp; how they do it</li>
<li>(Sparingly) when functions are invoked<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></li>
</ul>
<h3 id="identifiers-and-code-simplification">Identifiers and Code Simplification</h3>
<p>I’m going to intentionally give you no context for the following code:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">  userSession[<span class="st">&#39;signed&#39;</span>][<span class="st">&#39;admin&#39;</span>][<span class="st">&#39;update&#39;</span>] <span class="op">||</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  AdminOverrides[userSession[<span class="st">&#39;signed&#39;</span>][<span class="st">&#39;id&#39;</span>]]</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">  <span class="va">repository</span>.<span class="at">delete</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">  <span class="cf">return</span> <span class="at">render</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">    <span class="dt">status</span><span class="op">:</span> <span class="dv">200</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">    <span class="dt">body</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">      <span class="dt">notice</span><span class="op">:</span> <span class="st">&#39;Repository successfully deleted.&#39;</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">    <span class="op">}</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13">  <span class="cf">return</span> <span class="at">render</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14">    <span class="dt">status</span><span class="op">:</span> <span class="dv">403</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15">    <span class="dt">body</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16">      <span class="dt">errors</span><span class="op">:</span> [<span class="st">&#39;You are not allowed to perform that action.&#39;</span>]</a>
<a class="sourceLine" id="cb1-17" data-line-number="17">    <span class="op">}</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="op">}</span></a></code></pre></div>
<p>Okay, pretty straightforward. But consider this version instead:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">const</span> userHasUpdateAccess <span class="op">=</span> (</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  userSession[<span class="st">&#39;signed&#39;</span>][<span class="st">&#39;admin&#39;</span>][<span class="st">&#39;update&#39;</span>] <span class="op">||</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="va">AdminOverrides</span>.<span class="at">update</span>[userSession[<span class="st">&#39;signed&#39;</span>][<span class="st">&#39;id&#39;</span>]]</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="cf">if</span> (userHasAdminUpdateAccess) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">  <span class="va">repository</span>.<span class="at">delete</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">  <span class="cf">return</span> <span class="at">render</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">    <span class="dt">status</span><span class="op">:</span> <span class="va">STATUS_CODES</span>.<span class="at">ok</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10">    <span class="dt">body</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11">      <span class="dt">notice</span><span class="op">:</span> <span class="st">&#39;Repository successfully deleted.&#39;</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15">  <span class="cf">return</span> <span class="at">render</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16">    <span class="dt">status</span><span class="op">:</span> <span class="va">STATUS_CODES</span>.<span class="at">unauthorized</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17">    <span class="dt">body</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18">      <span class="dt">errors</span><span class="op">:</span> [<span class="st">&#39;You are not allowed to perform that action.&#39;</span>]</a>
<a class="sourceLine" id="cb2-19" data-line-number="19">    <span class="op">}</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="op">}</span></a></code></pre></div>
<p>We’ve made a few updates. First, we’ve pulled the condition out into its own variable. What that’s done is document the intention of what the condition is <em>supposed</em> to mean. This has a few benefits:</p>
<ul>
<li><strong>Each line is doing less, cognitively.</strong> That means you have to think about less when reading. You’re going to read code way more than you’re going to write it—why make it harder for yourself?<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></li>
<li><strong>Pulling that connection out and labeling it makes it harder to miss when changes happen.</strong> At some point, how we determine whether a user has update access will probably change. Additionally, the body of the first branch of the <code>if</code> may get much larger. It’s always easier to keep things tidy one piece at a time (as opposed to going back and cleaning it up later)!</li>
</ul>
<p>The other two changes are to replace the HTTP status codes (which are essentially <a href="https://en.wikipedia.org/wiki/Magic_number_(programming)">magic numbers</a>) with references to a global <code>STATUS_CODES</code> object. While HTTP status codes are fairly well known (e.g. a “404” is meaningful to many that have never done web development), they’re likely not going to be better known than English.</p>
<p>Generally, breaking things down like this makes the answer to “why?” very obvious.</p>
<h3 id="caveat-enigmatic-language-syntax">Caveat: Enigmatic language syntax</h3>
<p>Unlike libraries which can often be worked around, specific hard-to-parse features of a language’s syntax may be unavoidable. For example, most languages have regular expressions which are infamous for how easy they are to mess up. Consider the following regular expression in JavaScript:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">const</span> IS_VALID_EMAIL_REGEX <span class="op">=</span> <span class="ss">/</span><span class="sc">^[^@]+</span><span class="ss">@</span><span class="sc">[^@]+$</span><span class="ss">/</span><span class="op">;</span></a></code></pre></div>
<p>There’s not really much more we can do in terms of adding/changing identifiers to clarify how the regular expression determines which email addresses are valid and which aren’t–you just have to know the specific syntax of (JavaScript) regular expressions. In cases like these, an in-code comment (which we’ll talk about more in the next section) is the next best place to put this information:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co">// Matches one or more non-`@` characters, folloed by a `@` character, followed</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">// by one or more non-`@` characters.</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">const</span> IS_VALID_EMAIL_REGEX <span class="op">=</span> <span class="ss">/</span><span class="sc">^[^@]+</span><span class="ss">@</span><span class="sc">[^@]+$</span><span class="ss">/</span><span class="op">;</span></a></code></pre></div>
<h2 id="in-code-comments">In-code comments</h2>
<h3 id="accessibility-1">Accessibility</h3>
<p>One of the points made about code also apply to in-code comments: they are easily searchable using a file searcher. Also, they do not need any further seeking out than code,<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> unlike something like commit messages.</p>
<p>However, as they are in a non-programming language, they can be a bit less predictable in terms of structure—you’ll have a harder of a time breaking an English sentence into an abstract syntax tree than compared with something like JavaScript!</p>
<p>Additionally, in-code comments are related to their subjects typically by proximity alone. If someone moves that code without taking the comment with it, the comment ceases to be helpful (or, worse, becomes confusing/misleading). We talk about this more in the <a href="#common-pitfall-poor-comment-location">“Pitfall” section</a> below.</p>
<h3 id="responsibilities-1">Responsibilities</h3>
<p>Comments, while still being very visible, afford a much greater level of flexibility in comparison with code identifiers for documenting behavior, decisions, etc. Comments are where you put</p>
<ul>
<li>Explanations of why a section of code is the way that it is</li>
<li>Explanations of why a section of code <em>isn’t</em> written another way <strong>if one may be tempted to rewrite it</strong></li>
<li>Contextual information for where a code snippet came from if possibly helpful to future readers<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></li>
<li>Explanations of <a href="#caveat-enigmatic-language-syntax">enigmatic language syntax</a></li>
<li>(Sparingly) warnings and assumptions<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></li>
</ul>
<h3 id="common-pitfall-poor-comment-location">Common Pitfall: Poor Comment Location</h3>
<p>For example, say we have this method:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">// Must be done in reverse order to be done in O(N) time due to</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">// Kleppner&#39;s Law of Stupid Data Structures</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw">function</span> <span class="at">smooshify</span>(newElements) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="va">newElements</span>.<span class="at">length</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">    <span class="kw">this</span>.<span class="va">flarbo</span>.<span class="at">insert</span>(newElements[i])</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="op">}</span></a></code></pre></div>
<p>At some later point, it turns out are some <code>null</code> elements that need to be screened out:<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co">// Must be done in reverse order to be done in O(N) time due to</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">// Kleppner&#39;s Law of Stupid Data Structures</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="kw">function</span> <span class="at">smooshify</span>(newElements) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  <span class="kw">const</span> nonNullNewElements <span class="op">=</span> <span class="va">newElements</span>.<span class="at">withoutNulls</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="va">newElements</span>.<span class="at">length</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6">    <span class="kw">this</span>.<span class="va">flarbo</span>.<span class="at">insert</span>(nonNullNewElements[i])</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="op">}</span></a></code></pre></div>
<p>With the code as it is now, another dev may stumble along one day and ask “Is <code>withoutNulls</code> iterating in reverse order?” While this may be a bit of a trivial example, these things can lead to a lot more headache down the line</p>
<p>The only way to truly avoid mistakes like this is by is by keeping a vigilant eye on comments. Some techniques I’ve found to be helpful:</p>
<ul>
<li><p>Keep comments as closely positioned to the code they’re describing as possible. E.g. if talking about code in the first branch of an <code>if</code> statement, put that comment <strong>in the first branch</strong>, not above the entire statement:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co">// comment about why `floarp` should be used --- BAD</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="cf">if</span> (<span class="at">somethingOrOther</span>()) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3">  <span class="co">// comment about why `floarp` should be used --- GOOD</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">  <span class="at">floarp</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">  <span class="at">blarg</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="op">}</span></a></code></pre></div></li>
<li><p>Make references to specific identifiers in comments as these tend to garner more attention and help establish a more explicit relationship between the comment and the code</p></li>
</ul>
<h2 id="commit-messages">Commit Messages</h2>
<p>Most code that I’ve interacted with is version-controlled with something like Git, and if not Git, some other version-control software like Mercurial. I’m going to be referring to Git exclusively in this section, but I’m sure that there are similar tools for other version-control software.</p>
<h3 id="accessibility-2">Accessibility</h3>
<p>Unlike code or in-code comments, commit messages are not immediately visible when browsing a codebase. However, they can be made much more easily accessible with tools like <a href="https://github.com/tpope/vim-fugitive">Fugitive</a> (for Vim) or <a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens">GitLens</a> (for VSCode). However, they can be searched–just run <code>git log</code> and press <kbd>/</kbd> and <em>BAM</em>! You can search through all your commit history (thanks to <a href="https://en.wikipedia.org/wiki/Less_(Unix)"><code>less</code></a>)</p>
<p>Unfortunately, commit messages can sometimes be squashed or lost during a rebase, so the information placed there may not be preserved forever, though this mostly depends upon the other collaborators working on the repository.</p>
<h3 id="responsibilities-2">Responsibilities</h3>
<p>Much has been written about <a href="https://chris.beams.io/posts/git-commit/">how to write good commit messages</a>, so I won’t be too comprehensive here. However, I’d say the things I’m talking about here are, in my opinion, the most important things about writing a useful commit message. As much as I like consistency, the grammatical aspects of commit message guidelines are not nearly as helpful as guidelines on the <em>content</em> of the message (as long as it’s readable!).</p>
<p>Commit messages are all about change. A commit itself is an object representing a change to a codebase and commit messages ought to do the following:</p>
<ul>
<li>Briefly summarize what changed, from a high level</li>
<li>Explain why the changes in the commit are necessary</li>
<li>Explain why other possible strategies were <em>not</em> attempted, if relevant</li>
</ul>
<p>These are much easier to accomplish when the commits you make are small and focused (within reason).<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a></p>
<h3 id="tip-using-references-to-other-commits">Tip: using references to other commits</h3>
<p>While commit messages allow you to tell a story, any single commit rarely allows you to tell the whole story. If referencing earlier changes, I highly encourage you to make such references by using the commit hash. This will enable those reading those commit messages later to gain the same context you had when writing the message in the first place with a simple <code>git show</code>. A word of warning however: commit hashes will change when you rebase or amend a commit, so if referencing an earlier commit in a commit message, make sure to update that hash if the earlier commit is ever altered.</p>
<h2 id="pullmerge-requests-issue-trackers">Pull/merge requests &amp; issue trackers</h2>
<p>These are your GitHubs, your Asanas, your Jiras. I’m lumping issue trackers and hosted version control together because some of these services function as both (e.g. GitHub).</p>
<h3 id="accessibility-3">Accessibility</h3>
<p>While there’s a large amount of variance here, I always have found messages and comments to get lost somehow, even when generally good search functionality is present. Some services are better than others at this, but even in GitHub (which automatically doubly-link issues to pull requests), comments will be collapsed or hidden in large pull requests, making them a pain to excavate.</p>
<h3 id="responsibilities-3">Responsibilities</h3>
<p>These services are all about facilitating conversation and communication. As such, their responsibilities are focused on those topics:<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a></p>
<ul>
<li>Documenting why certain changes weren’t done and/or aren’t worth doing
<ul>
<li>However, these should instead be put in the relevant commit messages if they are related to certain changes that <em>did</em> make it into the codebase</li>
</ul></li>
<li>Containing or summarizing deliberation about proposed changes, even when that deliberation happens in real life or on something like Slack</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>Hope you found this helpful in answering the question “where do I put this information?”. If you have any thoughts, <a href="https://twitter.com/HarryB">I’m on Twitter</a>.</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Identifiers include variable names, function names, class names/types, operators—basically anything that has a name that you can control!<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>I’ll probably make another post about this, but I’ve found answering the question of “when” to be a bit of a slippery slope, especially in function names. When you answer the question of “when”, you are often doing so at the expense of “what”. Who hasn’t written a function like <code>onClick</code> or <code>after_save</code> that spans 20+ lines, accomplishing many disparate tasks? One technique I’ve employed when these are unavoidable (as these identifiers are often dictated by some external API) is to push all sense of “how” out of the bodies of these functions—they merely list off the things to do and the “how” is pushed into other functions. If you read on, we’re trying to lighten cognitive load here!<a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p><a href="https://www.google.com/search?q=code+boring+good">This is not a new idea</a>.<a href="#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>However, they may be slightly dimmed depending on the code editor.<a href="#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>I most often use this for adaptations of code from StackOverflow or blog posts.<a href="#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p>If possible, these should be replaced with good identifier naming, type checking, validations, etc.<a href="#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>If this were real code, I would hope that someone would also leave a comment explaining why we are doing this screening!<a href="#fnref7" class="footnote-back">↩</a></p></li>
<li id="fn8"><p>I found <a href="https://www.freshconsulting.com/atomic-commits/">this article</a> a great summary of the how/why of keeping commits small<a href="#fnref8" class="footnote-back">↩</a></p></li>
<li id="fn9"><p>Of course, these services have usages beyond the topics addressed in this post like: * centralizing the agreed upon priority of upcoming work * establishing the owner(s) of specific tasks * informing those outside the dev team about the progress of tasks, etc.<a href="#fnref9" class="footnote-back">↩</a></p></li>
</ol>
</section>
</body>
</html>
